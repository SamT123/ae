# Time-stamp: <2022-05-06 15:35:37 eu>
* acmacs-ace-v1 format to store chart data

fields with names starting with ? are ignored

|             |     |      |     |     | type                             | default         | allowed     | description                                                                                                                                                    |
|-------------+-----+------+-----+-----+----------------------------------+-----------------+-------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------|
| "  version" |     |      |     |     | str                              | "acmacs-ace-v1" |             |                                                                                                                                                                |
| "?created"  |     |      |     |     | any                              |                 |             | comment                                                                                                                                                        |
| "c"         |     |      |     |     | object                           |                 | :chart:     | single chart data                                                                                                                                              |
|-------------+-----+------+-----+-----+----------------------------------+-----------------+-------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------|

:chart: chart data
|     |      |     |     | type               | default       | allowed               | description                                                                                                                                                    |
|-----+------+-----+-----+--------------------+---------------+-----------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------|
| "i" |      |     |     | object             |               |                       | chart meta information                                                                                                                                         |
|     | "v"  |     |     | str                |               |                       | virus, e.g. INFLUENZA (default, if omitted), HPV, generic, DENGE                                                                                               |
|     | "V"  |     |     | str                |               |                       | virus type and subtype, e.g. B or A(H3N2) or serotype                                                                                                          |
|     | "A"  |     |     | str                |               |                       | assay: HI, HINT, FRA, FOCUST REDUCTION, PRNT                                                                                                                   |
|     | "D"  |     |     | str, date          |               | YYYYMMDD.NNN          | table/assay date and number (if multiple on that day), e.g. 20160602.002                                                                                       |
|     | "N"  |     |     | str                |               |                       | user supplied name                                                                                                                                             |
|     | "l"  |     |     | str                |               |                       | lab                                                                                                                                                            |
|     | "r"  |     |     | str                |               |                       | RBCs species of HI assay, e.g. "turkey"                                                                                                                        |
|     | "s"  |     |     | str                |               |                       | UNUSED subset/lineage, e.g. "2009PDM"                                                                                                                          |
|     | "T"  |     |     | str                |               |                       | table type "A[NTIGENIC]" - default, "G[ENETIC]"                                                                                                                |
|     | "S"  |     |     | [object]           |               |                       | source table info list, each entry is like "i"                                                                                                                 |
|-----+------+-----+-----+--------------------+---------------+-----------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------|
| "a" |      |     |     | [object]           |               |                       | Antigen list                                                                                                                                                   |
|     | "N"  |     |     | str, mandatory     |               |                       | name: TYPE(SUBTYPE)/[HOST/]LOCATION/ISOLATION/YEAR or CDC_ABBR NAME or UNRECOGNIZED NAME                                                                       |
|     | "a"  |     |     | array of str       |               |                       | annotations that distinguish antigens (prevent from merging): ["DISTINCT"], mutation information, unrecognized extra data                                      |
|     | "D"  |     |     | str, date          |               | YYYYMMDD / YYYY-MM-DD | isolation date                                                                                                                                                 |
|     | "L"  |     |     | str                |               |                       | lineage: "Y[AMAGATA]" or "V[ICTORIA]"                                                                                                                          |
|     | "P"  |     |     | str                |               |                       | passage, e.g. "MDCK2/SIAT1 (2016-05-12)"                                                                                                                       |
|     | "R"  |     |     | str                |               |                       | reassortant, e.g. "NYMC-51C"                                                                                                                                   |
|     | "l"  |     |     | array of str       |               |                       | lab ids ([lab#id]), e.g. ["CDC#2013706008"]                                                                                                                    |
|     | "A"  |     |     | str                |               |                       | aligned amino-acid sequence                                                                                                                                    |
|     | "B"  |     |     | str                |               |                       | aligned nucleotide sequence                                                                                                                                    |
|     | "Ai" |     |     | [pos1, "aas"]      |               |                       | insertions at the aa level                                                                                                                                     |
|     | "Bi" |     |     | [pos1, "nucs"]     |               |                       | insertions at the nucleotide level                                                                                                                             |
|     | "T"  |     |     | key-value  pairs   |               |                       | semantic attributes by group (see below the table)                                                                                                             |
|     | "C"  |     |     | str                |               |                       | (DEPRECATED, use "s") continent: "ASIA", "AUSTRALIA-OCEANIA", "NORTH-AMERICA", "EUROPE", "RUSSIA", "AFRICA", "MIDDLE-EAST", "SOUTH-AMERICA", "CENTRAL-AMERICA" |
|     | "c"  |     |     | array of str       |               |                       | (DEPRECATED, use "s") clades, e.g. ["5.2.1"]                                                                                                                   |
|     | "S"  |     |     | str                |               |                       | (DEPRECATED, use "s") single letter semantic boolean attributes: R - reference, E - egg, V - current vaccine, v - previous vaccine, S - vaccine surrogate      |
|-----+------+-----+-----+--------------------+---------------+-----------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------|
| "s" |      |     |     | [object]           |               |                       | Serum list                                                                                                                                                     |
|     | "N"  |     |     | str, mandatory     |               |                       | name: TYPE(SUBTYPE)/[HOST/]LOCATION/ISOLATION/YEAR or CDC_ABBR NAME or UNRECOGNIZED NAME                                                                       |
|     | "a"  |     |     | array of str       |               |                       | annotations that distinguish sera (prevent from merging), e.g. ["BOOSTED", "CONC 2:1", "HA-Y156T"]                                                             |
|     | "s"  |     |     | str                |               |                       | serum species, e.g "FERRET"                                                                                                                                    |
|     | "L"  |     |     | str                |               |                       | lineage: "Y[AMAGATA]" or "V[ICTORIA]"                                                                                                                          |
|     | "P"  |     |     | str                |               |                       | passage, e.g. "MDCK2/SIAT1 (2016-05-12)"                                                                                                                       |
|     | "R"  |     |     | str                |               |                       | reassortant, e.g. "NYMC-51C"                                                                                                                                   |
|     | "I"  |     |     | str                |               |                       | serum id, e.g "CDC 2016-045"                                                                                                                                   |
|     | "A"  |     |     | str                |               |                       | aligned amino-acid sequence                                                                                                                                    |
|     | "B"  |     |     | str                |               |                       | aligned nucleotide sequence                                                                                                                                    |
|     | "Ai" |     |     | [ [pos1, "aas"] ]  |               |                       | insertions at the aa level                                                                                                                                     |
|     | "Bi" |     |     | [ [pos1, "nucs"] ] |               |                       | insertions at the nucleotide level                                                                                                                             |
|     | "T"  |     |     | key-value  pairs   |               |                       | semantic attributes by group (see below the table)                                                                                                             |
|     | "h"  |     |     | array of numbers   |               |                       | DEPRECATED homologous antigen indices, e.g. [0]                                                                                                                |
|     | "C"  |     |     | str                |               |                       | (DEPRECATED, use "s") continent: "ASIA", "AUSTRALIA-OCEANIA", "NORTH-AMERICA", "EUROPE", "RUSSIA", "AFRICA", "MIDDLE-EAST", "SOUTH-AMERICA", "CENTRAL-AMERICA" |
|     | "c"  |     |     | array of str       |               |                       | (DEPRECATED, use "s") clades, e.g. ["5.2.1"]                                                                                                                   |
|     | "S"  |     |     | str                |               |                       | (DEPRECATED, use "s") single letter semantic boolean attributes: E - egg                                                                                       |
|-----+------+-----+-----+--------------------+---------------+-----------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------|
| "t" |      |     |     | object             |               |                       | Titers                                                                                                                                                         |
|     | "l"  |     |     | [ [str] ]          |               |                       | dense matrix of titers                                                                                                                                         |
|     | "d"  |     |     | [ {str: str} ]     |               |                       | sparse matrix, entry for each antigen present, key is serum index, value is titer, dont-care titers omitted                                                    |
|     | "L"  |     |     | [ {str: str} ]     |               |                       | layers of titers, each top level array element as in "d" or "l"                                                                                                |
|-----+------+-----+-----+--------------------+---------------+-----------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------|
| "C" |      |     |     | [float]            |               |                       | forced column bases for a new projections                                                                                                                      |
|-----+------+-----+-----+--------------------+---------------+-----------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------|
| "P" |      |     |     | [object]           |               |                       | Projections                                                                                                                                                    |
|     | "c"  |     |     | str                |               |                       | comment                                                                                                                                                        |
|     | "l"  |     |     | [ [float] ]        |               |                       | layout, if point is disconnected: empty list or ?[NaN, NaN]                                                                                                    |
|     | "i"  |     |     | integer            |               |                       | UNUSED number of iterations?                                                                                                                                   |
|     | "s"  |     |     | float              |               |                       | stress                                                                                                                                                         |
|     | "m"  |     |     | str                |               |                       | minimum column basis, "none" (default), "1280"                                                                                                                 |
|     | "C"  |     |     | [float]            |               |                       | forced column bases                                                                                                                                            |
|     | "t"  |     |     | [float]            |               |                       | transformation matrix                                                                                                                                          |
|     | "g"  |     |     | [float]            |               |                       | antigens_sera_gradient_multipliers, float for each point                                                                                                       |
|     | "f"  |     |     | [float]            |               |                       | avidity adjusts (antigens_sera_titers_multipliers), float for each point                                                                                       |
|     | "d"  |     |     | boolean            |               |                       | dodgy_titer_is_regular, false is default                                                                                                                       |
|     | "e"  |     |     | float              |               |                       | stress_diff_to_stop                                                                                                                                            |
|     | "U"  |     |     | [int]              |               |                       | list of indices of unmovable points (antigen/serum attribute for stress evaluation)                                                                            |
|     | "D"  |     |     | [int]              |               |                       | list of indices of disconnected points (antigen/serum attribute for stress evaluation)                                                                         |
|     | "u"  |     |     | [int]              |               |                       | list of indices of points unmovable in the last dimension (antigen/serum attribute for stress evaluation)                                                      |
|-----+------+-----+-----+--------------------+---------------+-----------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------|
| "R" |      |     |     | object             |               |                       | sematic attributes based plot specifications, key: name of the style, value: style object                                                                      |
|     | "z"  |     |     | int                |               |                       | priority order when showing in GUI                                                                                                                             |
|     | "t"  |     |     | str                |               |                       | title                                                                                                                                                          |
|     | "V"  |     |     | [x, y, w, h]       |               |                       | viewport                                                                                                                                                       |
|     | "A"  |     |     | [object]           |               |                       | modifiers to apply                                                                                                                                             |
|     |      | "R" |     | str                |               |                       | name ("N") of another plot spec to use (inherited from), applied before adding other changes provided by this object                                           |
|     |      | "T" |     | object             |               |                       | {<name of semantic attribute>: <value>} to select antigens/sera, if value is true, it means ag/sr selected if they have that semantic attribute with any value |
|     |      | "A" |     | bool or int        |               |                       | true or 1: select antigens only, false or 0: select sera only, absent or -1: select antigens and sera                                                          |
|     |      | "S" |     | str                |               |                       | shape: "C[IRCLE]" (default), "B[OX]", "T[RIANGLE]", "E[GG]", "U[GLYEGG]"                                                                                       |
|     |      | "F" |     | color, str         |               |                       | fill color                                                                                                                                                     |
|     |      | "O" |     | color, str         |               |                       | outline color                                                                                                                                                  |
|     |      | "o" |     | float              |               |                       | outline width                                                                                                                                                  |
|     |      | "s" |     | float              |               |                       | size, default 1.0                                                                                                                                              |
|     |      | "r" |     | float              |               |                       | rotation in radians, default 0.0                                                                                                                               |
|     |      | "a" |     | float              |               |                       | aspect ratio, default 1.0                                                                                                                                      |
|     |      | "-" |     | boolean            |               |                       | hide point and its label                                                                                                                                       |
|     |      | "D" |     | "r", "l"           |               |                       | drawing order: raise, lower, absent: no change                                                                                                                 |
|     |      | "l" |     | object             |               |                       | label style -> Offset + TextData                                                                                                                               |
|     |      |     | "-" | boolean            | false         |                       | if label is hidden                                                                                                                                             |
|     |      |     | "p" | [float{2}]         | [0, 1]        | [x, y]                | label offset (2D only), list of two doubles, default is [0, 1] means under point                                                                               |
|     |      |     | "t" | str                |               |                       | label text if forced by user                                                                                                                                   |
|     |      |     | "f" | str                |               |                       | font face                                                                                                                                                      |
|     |      |     | "S" | str                |               |                       | font slant: "normal" (default), "italic"                                                                                                                       |
|     |      |     | "W" | str                |               |                       | font weight: "normal" (default), "bold"                                                                                                                        |
|     |      |     | "s" | float              |               |                       | label size, default 1.0                                                                                                                                        |
|     |      |     | "c" | color              |               |                       | label color, default: "black"                                                                                                                                  |
|     |      |     | "r" | float              |               |                       | label rotation, default 0.0                                                                                                                                    |
|     |      |     | "i" | float              | 0.2           |                       | addtional interval between lines as a fraction of line height                                                                                                  |
|     |      | "L" |     | object             |               |                       | legend row                                                                                                                                                     |
|     |      |     | "p" | int                |               |                       | priority                                                                                                                                                       |
|     |      |     | "t" | str                |               |                       | text                                                                                                                                                           |
|     |      |     |     |                    |               |                       |                                                                                                                                                                |
|     | "T"  |     |     | object             |               |                       | Title                                                                                                                                                          |
|     |      | "-" |     | bool               |               |                       | hidden                                                                                                                                                         |
|     |      | "p" |     | [float{2}]         | [0, 0]        | [x, y]                | offset                                                                                                                                                         |
|     |      | "A" |     | object             |               |                       | plot spec of the area -> AreaData                                                                                                                              |
|     |      |     | "P" | [float{4}]         |               | [t, r, b, l]          | padding                                                                                                                                                        |
|     |      |     | "O" | str                | "black"       | Color                 | border                                                                                                                                                         |
|     |      |     | "o" | float              | 0.0           |                       | outline width (default: 0.0, i.e. no border)                                                                                                                   |
|     |      |     | "F" | str                | "transparent" | Color                 | fill                                                                                                                                                           |
|     |      | "t" |     | str                |               |                       | title text                                                                                                                                                     |
|     |      | "f" |     | str                | "helvetica"   | :font-face:           | font face                                                                                                                                                      |
|     |      | "S" |     | str                |               |                       | font slant: "normal" (default), "italic"                                                                                                                       |
|     |      | "W" |     | str                |               |                       | font weight: "normal" (default), "bold"                                                                                                                        |
|     |      | "s" |     | float              | 16.0          |                       | label size                                                                                                                                                     |
|     |      | "c" |     | color              |               |                       | label color, default: "black"                                                                                                                                  |
|     |      | "i" |     | float              | 0.2           |                       | addtional interval between lines as a fraction of line height                                                                                                  |
|     | "L"  |     |     | object             |               |                       | legend data                                                                                                                                                    |
|     |      | "-" |     | bool               | false         |                       | hidden                                                                                                                                                         |
|     |      | "p" |     | [float{2}]         | [0, 0]        | [x, y]                | offset, relative to "p"                                                                                                                                        |
|     |      | "c" |     | "tl"               | "tl"          | :corner:              | corner or center of the plot: t - top, c - center, b - bottom, l -left, r - right                                                                              |
|     |      | "A" |     | object             |               |                       | plot spec of the area  -> AreaData                                                                                                                             |
|     |      |     | "P" | [float{4}]         | [0,0,0,0]     | [t, r, b, l]          | padding                                                                                                                                                        |
|     |      |     | "O" | str                | "black"       | Color                 | border                                                                                                                                                         |
|     |      |     | "o" | float              | 1.0           |                       | outline width (default: 0.0, i.e. no border)                                                                                                                   |
|     |      |     | "F" | str                | "transparent" | Color                 | fill                                                                                                                                                           |
|     |      | "C" |     | bool               |               |                       | add counter                                                                                                                                                    |
|     |      | "S" |     | 10.0               |               |                       | point size                                                                                                                                                     |
|     |      | "T" |     | object             |               |                       | title -> TextData                                                                                                                                              |
|     |      |     | "t" | str                |               |                       | title text                                                                                                                                                     |
|     |      |     | "f" | str                | "helvetica"   | :font-face:           | font face                                                                                                                                                      |
|     |      |     | "S" | str                |               |                       | font slant: "normal" (default), "italic"                                                                                                                       |
|     |      |     | "W" | str                |               |                       | font weight: "normal" (default), "bold"                                                                                                                        |
|     |      |     | "s" | float              |               |                       | label size, default 1.0                                                                                                                                        |
|     |      |     | "c" | color              |               |                       | label color, default: "black"                                                                                                                                  |
|     |      |     | "A" | object             |               |                       | plot spec of the area  -> AreaData                                                                                                                             |
|     |      |     | "i" | float              | 0.2           |                       | addtional interval between lines as a fraction of line height                                                                                                  |
|     |      | "z" |     | bool               |               |                       | show rows with zero count                                                                                                                                      |
|-----+------+-----+-----+--------------------+---------------+-----------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------|
| "p" |      |     |     | object             |               |                       | legacy lispmds stype plot specification                                                                                                                        |
|     | "d"  |     |     | [int]              |               |                       | drawing order, point indices                                                                                                                                   |
|     | "E"  |     |     | object             |               |                       | error line positive, default: {"c": "blue"}                                                                                                                    |
|     | "e"  |     |     | object             |               |                       | error line negative, default: {"c": "red"}                                                                                                                     |
|     | "g"  |     |     | ?                  |               |                       | ? grid data                                                                                                                                                    |
|     | "P"  |     |     | [object]           |               |                       | list of plot styles                                                                                                                                            |
|     |      | "+" |     | boolean            |               |                       | if point is shown, default is true, disconnected points are usually not shown and having NaN coordinates in layout                                             |
|     |      | "F" |     | color, str         |               |                       | fill color: #FF0000 or T[RANSPARENT] or color name (red, green, blue, etc.), default is transparent                                                            |
|     |      | "O" |     | color, str         |               |                       | outline color: #000000 or T[RANSPARENT] or color name (red, green, blue, etc.), default is black                                                               |
|     |      | "o" |     | float              |               |                       | outline width, default 1.0                                                                                                                                     |
|     |      | "S" |     | str                |               |                       | shape: "C[IRCLE]" (default), "B[OX]", "T[RIANGLE]", "E[GG]", "U[GLYEGG]"                                                                                       |
|     |      | "s" |     | float              |               |                       | size, default 1.0                                                                                                                                              |
|     |      | "r" |     | float              |               |                       | rotation in radians, default 0.0                                                                                                                               |
|     |      | "a" |     | float              |               |                       | aspect ratio, default 1.0                                                                                                                                      |
|     |      | "l" |     | object             |               |                       | label style  -> Offset + TextData                                                                                                                              |
|     |      |     | "+" | boolean            |               |                       | if label is shown                                                                                                                                              |
|     |      |     | "p" | [float{2}]         |               |                       | label position (2D only), list of two doubles, default is [0, 1] means under point                                                                             |
|     |      |     | "t" | str                |               |                       | label text if forced by user                                                                                                                                   |
|     |      |     | "f" | str                | "helvetica"   | :font-face:           | font face                                                                                                                                                      |
|     |      |     | "S" | str                |               |                       | font slant: "normal" (default), "italic"                                                                                                                       |
|     |      |     | "W" | str                |               |                       | font weight: "normal" (default), "bold"                                                                                                                        |
|     |      |     | "s" | float              |               |                       | label size, default 1.0                                                                                                                                        |
|     |      |     | "c" | str                | "black"       | Color                 | label color                                                                                                                                                    |
|     |      |     | "r" | float              | 0.0           |                       | label rotation                                                                                                                                                 |
|     |      |     | "i" | float              | 0.2           |                       | addtional interval between lines as a fraction of line height                                                                                                  |
|     | "p"  |     |     | [int]              |               |                       | index in "P" for each point, antigens followed by sera                                                                                                         |
|     | "l"  |     |     | [int]              |               |                       | ? for each procrustes line, index in the "L" list                                                                                                              |
|     | "L"  |     |     | array              |               |                       | ? list of procrustes lines styles                                                                                                                              |
|     | "s"  |     |     | [int]              |               |                       | list of point indices for point shown on all maps in the time series                                                                                           |
|     | "t"  |     |     | object             |               |                       | ? title style                                                                                                                                                  |
|-----+------+-----+-----+--------------------+---------------+-----------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------|
| "x" |      |     |     | object             |               |                       | extensions not used by acmacs                                                                                                                                  |
|-----+------+-----+-----+--------------------+---------------+-----------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------|

Possible values:
:corner:  "tl", "tc", "tr", "bl", "bc", "br", "cl", "cc", "cr"
:font-face: "monospace", "sansserif", "serif", "helvetica", "courier", "times"

* semantic attributes by group

Group name (key in the key-value pair) is a unique string, few predefined groups
"C": ["clade", "clade"]
? "continent": "ASIA"
? "country": "UNITED KINGDOM"
"V": "p(revious)", "c(urrent)", "s(urrogate)"
"NT": total number of tables from hidb
"RT": "CDC:HI:guinea-pig:20141009" - the most recent table id from hidb
"TS": "2021-12" time series
? "layer": 1 - table series
"SC": [] - serum coverage data, N-fold for each serum


* -------------------- Local vars ----------------------------------------------------------------------
:PROPERTIES:
:VISIBILITY: folded
:END:
#+STARTUP: showall indent
Local Variables:
eval: (auto-fill-mode 0)
eval: (add-hook 'before-save-hook 'time-stamp)
End:
